# Dead Code Report

Generated from static analysis (AST reachability, `vulture`, and a frontend import graph). Tests were excluded from usage, so anything used only in tests is reported as unused.

## Cleanup Status

**Resolved items** are marked with ~~strikethrough~~. Cleanup performed in dead-code-cleanup pass.

### False Positives Found
- `backend/mcp/modules/lib/world_model_db.py` `row_factory` — does not exist in file (removed during SQLite-to-PostgreSQL migration)
- `backend/mcp/modules/service.py:17` `set_assessment_id`, `set_container_name` — actually used in the file's methods
- `backend/mcp/modules/tools_evidence.py:28` `EVIDENCE_DIR` — reads from `os.environ`, set by `config.py`'s `EVIDENCE_DIR` setting

## Entrypoints Considered
- `backend/main.py`
- `backend/mcp/autopentest_server.py`
- `aida.py`
- `tools/folder_opener.py`
- `frontend/src/main.jsx`

## Python Modules
### Unreachable Files (Best-Effort)
Only empty/marker `__init__.py` stubs were unreachable from the entrypoints.
- `backend/mcp/modules/__init__.py`
- `backend/mcp/modules/lib/__init__.py`
- `backend/middleware/__init__.py`
- `backend/schemas/__init__.py`
- `backend/services/__init__.py`
- `backend/utils/__init__.py`
- `backend/websocket/__init__.py`

### High-Confidence Unused (No References Found)
- `aida.py:168` `detect_python_bin`
- `backend/api/assessments.py:6` unused import `Body`
- `backend/api/commands.py:120` unused local `original_command`
- `backend/api/context_documents.py:5` unused import `shutil`
- `backend/api/context_documents.py:33` unused constant `MAX_TOTAL_SIZE`
- `backend/api/search.py:10` unused import `SearchRequest`
- ~~`backend/mcp/autopentest_server.py:174` unused arg `frame` in `signal_handler`~~ — RESOLVED: verified `frame` param is required by signal handler protocol
- ~~`backend/mcp/modules/service.py:17` unused imports `set_assessment_id`, `set_container_name`~~ — FALSE POSITIVE: actually used
- ~~`backend/mcp/modules/tools_evidence.py:28` unused constant `EVIDENCE_DIR`~~ — FALSE POSITIVE: reads env var set by config
- ~~`backend/services/container_service.py:18` unused imports `log_context`, `timed_operation`~~ — RESOLVED: removed
- `backend/services/search_service.py:6` unused import `case`
- `backend/services/workspace_service.py:281` `detect_container_switch` (method never called)
- ~~`backend/utils/log_context.py` unused helpers: `get_request_id`, `get_assessment_id`, `get_user_id`, `set_user_id`, `get_container_name`, `get_phase`, `set_phase`, `clear_context`, `log_context`, `timed_operation`~~ — RESOLVED: removed (kept `generate_request_id`, `set_request_id`, `set_assessment_id`, `set_container_name`, `request_context`)
- `backend/utils/recon_utils.py:45` `RECOMMENDED_CATEGORIES`
- `backend/utils/tool_analyzer.py:130` `get_all_tools_in_category`
- `backend/utils/tree_generator.py:117` `show_hidden`
- `backend/utils/tree_generator.py:150` `standard_folders`
- ~~`backend/websocket/events.py` unused enums `PING`, `COMMAND_STARTED`, `FOLDER_CREATED`, `FOLDER_UPDATED`, `FOLDER_DELETED`, `SYSTEM_STATUS_CHANGED`~~ — RESOLVED: removed
- ~~`backend/websocket/events.py:198` `event_error`~~ — RESOLVED: removed
- `backend/websocket/manager.py:158` `get_connection_count`
- ~~`backend/middleware/logging_middleware.py` `AccessLogMiddleware` is defined but never registered~~ — RESOLVED: removed
- `backend/services/scan_importer/base_parser.py` unused enum values `ItemType.TECHNOLOGY`, `ItemType.HOST`
- `backend/models/command_history.py` `timeout_at` is set but never read (write-only field)

### MCP Lib: Unreferenced APIs (Non-Test Code)
These symbols are defined under `backend/mcp/modules/lib/` but do not appear in any non-test code.
- `backend/mcp/modules/lib/browser_forms.py` `fill_form`, `submit_form`
- `backend/mcp/modules/lib/browser_session.py` `set_active_session`, `close_all_sessions`
- `backend/mcp/modules/lib/browser_xss.py` `was_dialog_detected`
- `backend/mcp/modules/lib/budget_tracker.py` `check_request`, `get_target_request_count`, `get_total_request_count`, `get_current_rate`
- `backend/mcp/modules/lib/concurrency_limiter.py` `is_available`, `get_active_count`, `get_queue_length`
- `backend/mcp/modules/lib/confidence_scorer.py` `get_thresholds`
- `backend/mcp/modules/lib/embedder.py` `DIMENSIONS`, `embed_batch`, `cosine_similarity`
- `backend/mcp/modules/lib/evidence_bundler.py` `list_bundles`, `list_bundles_by_finding`, `delete_bundle`, `remove_artifact`, `get_artifact`, `update_metadata`, `get_bundle_count`, `reset_bundler`
- `backend/mcp/modules/lib/evidence_exporter.py` `export_with_report`, `reset_exporter`
- `backend/mcp/modules/lib/evidence_redactor.py` `add_pattern`, `remove_pattern`, `get_patterns`, `set_mask_char`, `get_mask_char`, `set_preserve_length`, `reset_redactor`
- `backend/mcp/modules/lib/http_client.py` `get_action_id`, `get_remaining_budget`, `is_budget_exhausted`, `reset_stats`
- `backend/mcp/modules/lib/nuclei_runner.py` `get_version`, `get_nuclei_runner`
- `backend/mcp/modules/lib/path_traversal_payloads.py` `ALL_TARGET_OS`, `get_path_traversal_payloads`
- `backend/mcp/modules/lib/payload_generator.py` `get_payload_type_descriptions`, `get_db_payloads`, `get_payload_examples`
- `backend/mcp/modules/lib/rate_limiter.py` `get_available_tokens`
- `backend/mcp/modules/lib/recon_pipeline.py` `STAGE_NAMES`
- `backend/mcp/modules/lib/repro_runner.py` `get_default_count`
- `backend/mcp/modules/lib/response_classifier.py` `payload_used`, `baseline_body_has`
- `backend/mcp/modules/lib/safety_classifier.py` `classify_url`
- `backend/mcp/modules/lib/sarif_formatter.py` `format_single`
- `backend/mcp/modules/lib/schema_fuzzer.py` `parse_openapi_schema`, `get_request_count`, `reset_request_count`, `get_payload_generator`, `get_signal_detector`
- `backend/mcp/modules/lib/scope_validator.py` `assert_in_scope`
- `backend/mcp/modules/lib/signal_detector.py` `set_config`
- `backend/mcp/modules/lib/template_manager.py` `set_mock_mode`, `get_templates_dir`, `clear_cache`, `get_templates_by_severity`, `get_templates_by_tags`, `get_template_count_by_severity`, `get_all_tags`, `get_template_manager`
- `backend/mcp/modules/lib/world_model_db.py` `ENDPOINT_STATUSES`, `IDENTITY_STATUSES`, `VULN_CLASSES`, `delete_knowledge`, `reset_world_model_db`
- `backend/mcp/modules/lib/xss_payloads.py` `get_xss_payloads`

### MCP Lib: Used Only in Tests (Reported as Unused)
These helpers are referenced only in tests (tests excluded).
- `backend/mcp/modules/lib/xss_payloads.py` `get_xss_payloads`, `get_waf_bypass_payloads`
- `backend/mcp/modules/lib/ssrf_payloads.py` `get_ssrf_payloads`, `get_waf_bypass_payloads`
- `backend/mcp/modules/lib/ssti_payloads.py` `get_ssti_payloads`, `get_waf_bypass_payloads`, `get_all_engines`
- `backend/mcp/modules/lib/path_traversal_payloads.py` `get_path_traversal_payloads`, `get_waf_bypass_payloads`
- `backend/mcp/modules/lib/sql_payloads.py` `get_waf_bypass_payloads`

## Frontend
### Unreachable Files (Not Imported from `frontend/src/main.jsx`)
- `frontend/src/components/ui/sidebar.jsx`
- `frontend/src/hooks/use-mobile.js`
- `frontend/src/services/assessmentService.js`
- `frontend/src/services/cardService.js`
- `frontend/src/services/pendingCommandService.js`
- `frontend/src/services/reconService.js`
- `frontend/src/services/sectionService.js`

### ~~Dead Frontend Files (Deleted)~~ — RESOLVED: staged for commit
- ~~`frontend/src/components/common/AssessmentCardActions.jsx`~~
- ~~`frontend/src/components/common/CommandsStats.jsx`~~
- ~~`frontend/src/components/common/PendingCommandModal.jsx`~~
- ~~`frontend/src/hooks/useAssessment.js`~~
- ~~`frontend/src/utils/constants.js`~~
- ~~`frontend/src/utils/formatters.js`~~
- ~~`frontend/src/utils/logger.js`~~

### Unused Dependency
- `@ant-design/icons`

## Known False Positives / Caveats
- FastAPI route handlers and lifecycle hooks are invoked via decorators; static tools may mark them unused.
- Pydantic models/fields and SQLAlchemy columns can be used via reflection and won't always show direct references.
- MCP tool handlers are registered via decorators and dispatch registries; static analysis can under-approximate usage.
- `tools/folder_opener.py` overrides (`do_POST`, `do_OPTIONS`, `log_message`) are called by `BaseHTTPRequestHandler`.
- `row_factory` in `world_model_db.py` — reported as unused but does not exist (removed during SQLite-to-PG migration).
